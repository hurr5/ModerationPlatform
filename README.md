# Платформа модерации объявлений

Веб-приложение для модерации объявлений с возможностью просмотра статистики и управления объявлениями.

## Установка и запуск

### 1. Установка зависимостей

```bash
npm install
```

### 2. Настройка переменных окружения

Создайте файл `.env` в корне проекта со следующим содержимым:

```env
VITE_API_ENDPOINT=http://localhost:3001/api/v1
```

По умолчанию API сервер запускается на порту 3001. Если ваш сервер работает на другом порту, измените значение переменной.

### 3. Запуск API сервера

Перейдите в папку `server` (или `../backend`) и запустите сервер:
1. Установите сервер из репозитория:
`https://github.com/avito-tech/tech-internship/tree/main/Tech%20Internships/Frontend/Frontend-trainee-assignment-autumn-2025/tech-int3-server`
2. Перейдите в директорию сервера и установите зависимости, затем запустите сервер:
```bash
# Переход в директорию сервера
cd tech-int3-server

# Установка зависимостей
npm install

# Запуск сервера
npm start

# Или запуск в режиме разработки с автоматической перезагрузкой
npm run dev
```
**3. Если браузер выдает ошибку CORS, то замените код в `server.js` на указанный в примечаниях под 3 пунктом**

```bash
cd ../backend
npm install
npm start
```

API сервер будет доступен по адресу `http://localhost:3001`

### 4. Запуск фронтенда

В корне проекта выполните:

```bash
npm run dev
```

Приложение будет доступно по адресу `http://localhost:5173` (или другому порту, указанному Vite)

### 5. Сборка для production

```bash
npm run build
```

Собранные файлы будут находиться в папке `dist`.

## Структура проекта

```
ModerationPlatform/
├── src/
│   ├── components/      # React компоненты
│   │   ├── item/        # Компоненты для просмотра объявления
│   │   ├── list/        # Компоненты списка объявлений
│   │   ├── stats/       # Компоненты статистики и графиков
│   │   └── ui/          # Файлы создаваемые Chakra UI
│   │   └── constants/   # Словари для перевода статусов и других данных
│   ├── hooks/           # Custom React hooks
│   ├── types/           # TypeScript типы
│   ├── constants/       # Константы приложения
│   └── App.tsx          # Главный компонент
└── package.json
```

## Использованные библиотеки (необязательные)

### UI библиотеки

#### 1. **Chakra UI** (`@chakra-ui/react`, `@chakra-ui/charts`)
Использована для создания современного и доступного пользовательского интерфейса. Chakra UI предоставляет готовые компоненты с хорошей типизацией, поддержкой темной темы из коробки и удобной системой стилизации через пропсы. Это ускорило разработку и обеспечило консистентность дизайна.

#### 2. **Ant Design** (`antd`)
Использована для некоторых специфических компонентов (например, DatePicker, модальные окна), которые имеют более богатый функционал по сравнению с базовыми компонентами Chakra UI. Комбинация двух UI библиотек позволяет использовать лучшие возможности каждой.

### Утилиты для работы с данными

#### 3. **TanStack Query** (`@tanstack/react-query`)
Использована для управления серверным состоянием, кэширования запросов и синхронизации данных. React Query значительно упрощает работу с асинхронными запросами, автоматически обрабатывает загрузку, ошибки и обновление данных. Это критично для приложения модерации, где требуется частая синхронизация состояния между сервером и клиентом.

### Стилизация

#### 4. **Tailwind CSS** (`tailwindcss`, `@tailwindcss/vite`)
Использован в качестве utility-first CSS фреймворка для быстрой стилизации компонентов и создания адаптивного дизайна. Tailwind CSS отлично сочетается с компонентными библиотеками и позволяет создавать кастомные стили без написания отдельного CSS. Интеграция через Vite плагин обеспечивает быструю компиляцию и tree-shaking.

### Графики и визуализация

#### 5. **Recharts** (`recharts`)
Использована для создания интерактивных графиков статистики (активность модераторов, распределение решений, категории). Recharts - это композиционная библиотека для React с хорошей типизацией и гибкостью настройки. Она идеально подходит для отображения аналитических данных в разделе статистики. Также используется в графиках предоставленных Chakra UI.

### Иконки

#### 6. **Lucide React** (`lucide-react`)
Использована как основной набор иконок благодаря современному дизайну, хорошей производительности (tree-shaking) и широкому выбору иконок. Все иконки загружаются как отдельные компоненты, что минимизирует размер бандла.

#### 7. **React Icons** (`react-icons`)
Использована как дополнительный источник иконок для покрытия специфических потребностей, которые не представлены в Lucide React. Библиотека включает иконки из множества популярных наборов.

### Темная тема

#### 8. **next-themes** (`next-themes`)
Использована для управления переключением между светлой и темной темой. Библиотека предоставляет простое API для работы с темами, предотвращает мерцание при загрузке страницы и сохраняет выбор пользователя. Это улучшает пользовательский опыт, особенно при длительной работе модератора.

### Дополнительные зависимости

#### 9. **Emotion** (`@emotion/react`)
Используется Chakra UI в качестве runtime зависимости для CSS-in-JS. Это необходимо для корректной работы стилизации компонентов Chakra UI.

### 10. **Prettier**
Используется для стилизации кода и сохранения общего дизайн-кода.

## Разработка

### Доступные скрипты

- `npm run dev` - запуск приложения в режиме разработки
- `npm run build` - сборка приложения для production
- `npm run lint` - проверка кода линтером
- `npm run preview` - предпросмотр production сборки

### Типизация

Проект использует TypeScript для обеспечения типобезопасности кода. Все типы определены в папке `src/types/`.

## Основные возможности

- Просмотр списка объявлений с фильтрацией и пагинацией
- Детальный просмотр объявления
- Одобрение объявлений
- Отклонение объявлений с указанием причины
- Отправка объявлений на доработку
- Просмотр статистики модерации:
  - График активности
  - Распределение решений
  - Статистика по категориям
- Переключение между светлой и темной темой

## Примечания

- Убедитесь, что API сервер запущен перед запуском фронтенда
- Для корректной работы приложения необходим доступ к API endpoint, указанному в переменной окружения `VITE_API_ENDPOINT`
- При использовании своего API, не забудьте настроить CORS:
`backend/server.js`
```server.js
const express = require('express');
const path = require('path');

const app = express();
const PORT = process.env.PORT || 3001;

app.use(express.json());
app.use(express.static('public'));

app.use((req, res, next) => {
  res.header("Access-Control-Allow-Origin", "*");
  res.header("Access-Control-Allow-Methods", "GET,POST,PUT,DELETE,OPTIONS");
  res.header("Access-Control-Allow-Headers", "Content-Type, Authorization");

  if (req.method === "OPTIONS") {
    return res.sendStatus(204);
  }

  next();
});

app.use('/api/v1', require('./src/routes/v1'));

app.get('/', (req, res) => {
  res.json({
    message: 'API сервер для модерации объявлений',
    version: '1.0.0'
  });
});

app.use((err, req, res, next) => {
  console.error(err.stack);
  res.status(500).json({
    error: 'Что-то пошло не так!',
    message: err.message
  });
});

app.use('*', (req, res) => {
  res.status(404).json({
    error: 'Endpoint не найден',
    path: req.originalUrl
  });
});

app.listen(PORT, () => {
  console.log(`Сервер запущен на порту ${PORT}`);
});

module.exports = app;
```
- В production режиме не забудьте настроить CORS на сервере для вашего домена
